<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å™µå…/é–‹å‘ä»²</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Courier New', monospace;
        }
        
        body {
            background-color: #0a0a0a;
            color: #c0c0c0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow: hidden;
            position: relative;
            cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Ccircle cx='12' cy='12' r='10' fill='%238b0000' opacity='0.7'/%3E%3C/svg%3E") 12 12, auto;
        }
        
        /* ç”µè§†é›ªèŠ±ç‰¹æ•ˆ */
        .tv-static {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-radial-gradient(#000 0 0.0001%, #333 0 0.0002%) 50% 0/2500px 2500px,
                        repeating-conic-gradient(#000 0 0.0001%, #222 0 0.0002%) 60% 60%/2500px 2500px;
            background-blend-mode: difference;
            opacity: 0.07;
            animation: tv-static 0.15s infinite;
            pointer-events: none;
            z-index: 10;
        }
        
        /* æ‰«æçº¿æ•ˆæœ */
        .scanlines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, 
                rgba(255,255,255,0) 0%, 
                rgba(255,255,255,0.025) 50%, 
                rgba(255,255,255,0) 100%);
            background-size: 100% 3px;
            pointer-events: none;
            z-index: 11;
            animation: scanline 5s linear infinite;
        }
        
        .screen-border {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            box-shadow: inset 0 0 35px 8px #000;
            pointer-events: none;
            z-index: 12;
        }
        
        .game-container {
            width: 100%;
            max-width: 780px;
            border: 2px solid #3a0a0a;
            border-radius: 4px;
            background-color: #151010;
            box-shadow: 0 0 12px rgba(80, 0, 0, 0.4), inset 0 0 8px rgba(0, 0, 0, 0.7);
            overflow: hidden;
            position: relative;
            animation: container-distort 7s infinite alternate ease-in-out;
        }
        
        .game-header {
            background: linear-gradient(to right, #251010, #301010);
            padding: 10px;
            text-align: center;
            border-bottom: 1px solid #500;
            position: relative;
            overflow: hidden;
        }
        
        .game-header h1 {
            font-size: 26px;
            color: #700;
            text-shadow: 1px 1px 0 #200, 2px 2px 0 #000;
            letter-spacing: 1px;
            font-weight: normal;
            position: relative;
            z-index: 2;
            animation: text-glitch 4s infinite;
        }
        
        .game-content {
            display: flex;
            flex-direction: column;
            padding: 12px;
            min-height: 460px;
            position: relative;
        }
        
        .character-section {
            display: flex;
            margin-bottom: 12px;
            align-items: flex-end;
            position: relative;
        }
        
        .pixel-character {
            width: 190px;
            height: 210px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 15px;
            position: relative;
        }
        
        /* æ­£å¸¸é˜¶æ®µç¼©ç•¥å›¾å®¹å™¨ */
        .normal-thumbnail {
            position: absolute;
            width: 110px;
            height: 130px;
            top: 65px;
            left: 215px;
            z-index: 3;
            opacity: 0;
            transform: scale(0.7) rotate(-5deg);
            transition: opacity 1.5s, transform 2s;
            pointer-events: none;
        }
        
        .normal-thumbnail.visible {
            opacity: 0.45;
            transform: scale(0.68) rotate(-7deg);
        }
        
        .pixel-grid {
            display: grid;
            grid-template-columns: repeat(16, 1fr);
            grid-template-rows: repeat(16, 1fr);
            width: 190px;
            height: 190px;
            gap: 0;
            image-rendering: pixelated;
            position: relative;
            z-index: 2;
        }
        
        .thumbnail-grid {
            display: grid;
            grid-template-columns: repeat(16, 1fr);
            grid-template-rows: repeat(16, 1fr);
            width: 110px;
            height: 110px;
            gap: 0;
            image-rendering: pixelated;
        }
        
        .pixel {
            width: 11.875px;
            height: 11.875px;
            transition: all 1.2s ease;
            position: relative;
        }
        
        .pixel.corrupted {
            animation: pixel-corrupt 2.5s infinite;
        }
        
        .pixel.void {
            background-color: #000 !important;
            animation: void-pulse 3.5s infinite;
        }
        
        .dialog-section {
            flex: 1;
            background-color: rgba(25, 10, 10, 0.92);
            border: 1px solid #500;
            border-radius: 4px;
            padding: 14px;
            min-height: 170px;
            position: relative;
            backdrop-filter: blur(1px);
            animation: dialog-twitch 9s infinite;
        }
        
        .dialog-text {
            font-size: 15px;
            line-height: 1.5;
            margin-bottom: 10px;
            min-height: 115px;
        }
        
        .dialog-text .name {
            color: #700;
            font-weight: bold;
            margin-bottom: 6px;
            display: block;
            font-size: 17px;
            text-shadow: 1px 1px 0 #000;
            animation: name-flicker 2.5s infinite;
        }
        
        .click-hint {
            text-align: center;
            color: #804040;
            font-size: 12px;
            position: absolute;
            bottom: 6px;
            right: 12px;
            animation: hint-pulse 2.2s infinite;
        }
        
        .chaos-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 15% 85%, rgba(100, 0, 0, 0.08) 0%, transparent 55%),
                radial-gradient(circle at 85% 15%, rgba(0, 80, 0, 0.08) 0%, transparent 55%);
            z-index: 0;
            animation: chaos-rotate 22s infinite linear;
        }
        
        .error-message {
            text-align: center;
            padding: 18px;
            font-size: 16px;
            color: #700;
            line-height: 1.4;
            margin-top: 12px;
            background-color: rgba(35, 10, 10, 0.82);
            border-radius: 4px;
            border: 1px solid #500;
        }
        
        @media (max-width: 750px) {
            .character-section {
                flex-direction: column;
                align-items: center;
            }
            
            .pixel-character {
                margin-right: 0;
                margin-bottom: 12px;
            }
            
            .normal-thumbnail {
                left: 155px;
                top: 125px;
            }
            
            .game-content {
                padding: 10px;
            }
            
            .game-header h1 {
                font-size: 20px;
            }
        }
        
        @keyframes tv-static {
            0% { opacity: 0.04; }
            50% { opacity: 0.09; }
            100% { opacity: 0.04; }
        }
        
        @keyframes scanline {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(100%); }
        }
        
        @keyframes container-distort {
            0% { transform: skew(0deg, 0deg) scale(1); }
            33% { transform: skew(0.2deg, -0.2deg) scale(1.001); }
            67% { transform: skew(-0.2deg, 0.2deg) scale(0.999); }
            100% { transform: skew(0deg, 0deg) scale(1); }
        }
        
        @keyframes text-glitch {
            0% { transform: translateX(0); color: #700; }
            96% { transform: translateX(0); color: #700; }
            97% { transform: translateX(-0.8px); color: #500; }
            98% { transform: translateX(0.8px); color: #900; }
            99% { transform: translateX(-0.4px); color: #600; }
            100% { transform: translateX(0); color: #700; }
        }
        
        @keyframes dialog-twitch {
            0% { transform: translateX(0) rotate(0deg); }
            94% { transform: translateX(0) rotate(0deg); }
            95% { transform: translateX(1.5px) rotate(0.15deg); }
            96% { transform: translateX(-1.5px) rotate(-0.15deg); }
            97% { transform: translateX(0.8px) rotate(0.08deg); }
            100% { transform: translateX(0) rotate(0deg); }
        }
        
        @keyframes name-flicker {
            0% { opacity: 1; }
            48% { opacity: 0.88; }
            52% { opacity: 0.78; }
            56% { opacity: 0.91; }
            64% { opacity: 0.83; }
            72% { opacity: 0.95; }
            84% { opacity: 0.89; }
            100% { opacity: 1; }
        }
        
        @keyframes hint-pulse {
            0% { opacity: 0.38; }
            43% { opacity: 0.62; }
            76% { opacity: 0.44; }
            87% { opacity: 0.71; }
            100% { opacity: 0.38; }
        }
        
        @keyframes chaos-rotate {
            0% { transform: rotate(0deg); }
            46% { transform: rotate(177deg); }
            53% { transform: rotate(183deg); }
            61% { transform: rotate(357deg); }
            69% { transform: rotate(363deg); }
            77% { transform: rotate(537deg); }
            86% { transform: rotate(543deg); }
            94% { transform: rotate(717deg); }
            100% { transform: rotate(720deg); }
        }
        
        @keyframes pixel-corrupt {
            0% { filter: hue-rotate(0deg); }
            42% { filter: hue-rotate(8deg); }
            74% { filter: hue-rotate(-4deg); }
            88% { filter: hue-rotate(6deg); }
            100% { filter: hue-rotate(0deg); }
        }
        
        @keyframes void-pulse {
            0% { opacity: 0.18; }
            34% { opacity: 0.29; }
            57% { opacity: 0.23; }
            79% { opacity: 0.32; }
            100% { opacity: 0.18; }
        }
        
        @keyframes fade-out {
            0% { opacity: 1; }
            39% { opacity: 0.81; }
            67% { opacity: 0.59; }
            83% { opacity: 0.32; }
            94% { opacity: 0.14; }
            100% { opacity: 0; }
        }
    </style>
</head>
<body>
    <div class="tv-static"></div>
    <div class="scanlines"></div>
    <div class="screen-border"></div>
    
    <div class="game-container">
        <div class="chaos-bg"></div>
        <div class="game-header">
            <h1>å™µå…/é–‹å‘ä»²</h1>
        </div>
        
        <div class="game-content">
            <div class="character-section">
                <div class="pixel-character">
                    <div class="pixel-grid" id="pixel-character"></div>
                    <!-- æ­£å¸¸é˜¶æ®µç¼©ç•¥å›¾ -->
                    <div class="normal-thumbnail" id="normal-thumbnail">
                        <div class="thumbnail-grid" id="thumbnail-grid"></div>
                    </div>
                </div>
                
                <div class="dialog-section" id="dialog-section">
                    <div class="dialog-text" id="dialog-text">
                        <span class="name">è¾¶å…</span>
                        <span id="current-dialog">æ£€æµ‹åˆ°æœªç»æˆæƒçš„è®¿é—®è·¯å¾„...æ­¤å¤„ä¸åº”è¢«æ‰“å¼€...</span>
                    </div>
                    <div class="click-hint">ç‚¹å‡»ç»§ç»­ â†’</div>
                </div>
            </div>
        </div>
    </div>

    <script>
       const gameData = {
    currentDialogIndex: 0,
    corruptionLevel: 0,
    dialogs: [
        { name: "å™µèŸ", text: "æ£€æ¸¬dÃ oæœªç¶“shÃ²uæ¬Šçš„è¨ªå•è·¯å¾‘...æ­¤å¤„ä¸yÄ«ngè¢«dÇé–‹...", corruptionLevel: 0 },
        { name: "é“å…”", text: "æ•¸æ“šå®Œæ•´æ€§æ ¡yÃ nå¤±æ•—...fÄç¾ç•°å¸¸cÄnæ•¸...", corruptionLevel: 0 },
        { name: "då…", text: "ç³»çµ±æ—¥èªŒé¡¯shÃ¬æœªzhÄ«çš„å…¥å£é»è¢«æ¿€æ´»...", corruptionLevel: 0 },
        { name: "é“ å…”", text: "å…§å­˜åœ°å€chÅ«ç¾è¡çª...æŒ‡é‡ç•°chÃ¡ng...", corruptionLevel: 0 },
        { name: "é“  å…”", text: "æ¸²æŸ’guÇnç·šæ¥æ”¶åˆ°wÃºæ•ˆæŒ‡lÃ¬ng..", corruptionLevel: 0 },
        { name: "é“ğŸ°", text: "åœ–xÃ­ngç·©è¡qÅ«æº¢å‡º...è¦–è¦ºshÃ¹æ“šæhuÃ i...", corruptionLevel: 1 },
        
        // ç´¢å¼•6-19ï¼šåŸºç¡€è§„åˆ™ï¼ˆå¼‚ä½“å­—75%ï¼Œæ‹¼éŸ³23%ï¼Œæ€ªå¼‚ç¬¦å·2%ï¼‰
        { name: "å¤§å“¦å‡ƒ", text: "éš‚é »è§§ç¢¼å™é€„åˆ‚è‡³ç„¡ç‹è­˜åˆ¥çš„æŒŒã¦¾...", corruptionLevel: 1 },
        { name: "ï¼Ÿï¼Ÿ", text: "äºŠä¼£å»µç’°ä»²å‡µç¾å°¸é–å¾´å—...", corruptionLevel: 1 },
        { name: "ï¼Ÿå…", text: "ç¶²çµ¡å¥—æ²å®€å­æ‚¥å‡¦é—œé–‰...é€£ä»²æ–·...", corruptionLevel: 1 },
        { name: "å¯¼å›¾", text: "æ•¸æ“šåº«æŸ»è©¢è¿”å›¬ç©ºå€¤...ç´¢å¼•ä¸Ÿå¤±...", corruptionLevel: 1 },
        { name: "å²›å‡¸", text: "åŠ å®»é‘°é©—è­‰å¤±æ•—...ä¾’å…¨å”è­°è¡¤çš®ç¹é...", corruptionLevel: 2 },
        { name: "#då…”", text: "ç·©å­˜ä¸€ã‘€æ€§å”è­°å¤±xiÃ o...è‡“æ•¸æ“šå¯«å…¥...", corruptionLevel: 2 },
        { name: "å…”", text: "ç·šç¨‹åŒæ­©æ©Ÿè»„å´©kuÃ¬...ç«¶æ…‹æ¢ä¼£è§¸ç™¼...", corruptionLevel: 2 },
        { name: "çªé“åœŸ", text: "è™šæ“¬æ©Ÿç›£è¦–å™æ•ç²ç‰¹æ¨©æŒ‡lÃ¬ngç•°chÃ¡ng...", corruptionLevel: 2 },
        { name: "å™µ", text: "æ–‡ä¼£ç³»çµ±å ±å‘Šä¸kÄ›ä¿®å¾©çš„æ‰‡å€éŒ¯wu...", corruptionLevel: 2 },
        { name: "å…”", text: "ç¡¬ä¼£æŠ½ã‘¯å±¤è¿”å›¬wÃºæ•ˆçš„è¨­ä¿»å¥bÇng...", corruptionLevel: 2 },
        { name: "dot", text: "é€²ç¨‹èª¿åº¦å™é™·rÃ¹ç„¡é™ç­‰dÃ iç‹€tÃ i...", corruptionLevel: 3 },
        { name: "aotu", text: "å…§å­˜guÇnç†å–®å…ƒå ±å‘Šé é¢éŒ¯wuéˆ...", corruptionLevel: 3 },
        { name: "*çš„tu", text: "ä¸­æ–·æè¿°ç¬¦è¡¨é …è¢«æ‚¥å‡¦è¦†è“‹...", corruptionLevel: 3 },
        { name: "Ğ¸å…”", text: "ç³»çµ±èª¿ç”¨è¡¨åœ°å€è¢«é‡dÃ¬ngå‘...", corruptionLevel: 3 },
        
        // ç´¢å¼•20-34ï¼šåŠ å…¥æ‹‰ä¸æ–‡ï¼ˆå¼‚ä½“å­—70.5%ï¼Œæ‹¼éŸ³21.6%ï¼Œæ€ªå¼‚ç¬¦å·1.9%ï¼Œæ‹‰ä¸æ–‡6%ï¼‰
        { name: "ğŸ°", text: "å…§etæ¨¡å¡Šç°½åé©—è­‰å¤±æ•—...", corruptionLevel: 3 }, 
        { name: "11", text: "è¨­ä¿»é©…å‹•ç¨‹xÃ¹è¿”å›¬ä¸kÄ›èƒ½çš„IOCTLä»£ç¢¼...", corruptionLevel: 3 },
        { name: "é“å…”", text: "é›»yuÃ¡nç®¡lÇç­–lÃ¼Ã¨é•åç†±è¨­jÃ¬é™zhÃ¬...", corruptionLevel: 3 },
        { name: "é“å…”é“å…”", text: "å¯¦æ™‚æ™‚é˜è¨ˆæ•¸å™chÅ«ç¾å›æ»¾è·¡xiÃ ng...", corruptionLevel: 3 },
        { name: "é“å…”é“å…”é“å…”", text: "PCIé…zhÃ¬ç©ºjianè®€qÇ”åˆ‚è‡³ä¿liÃºå­—duÃ nçš„éé›¶å€¤...", corruptionLevel: 4 },
        { name: "é“å…”é“å…”é“å…”é“å…”å™µ", text: "ACPIè¡¨æ ¡é©—å’ŒwÃºæ•ˆ...ç³»çµ±æè¿°ç¬¦æhuÃ i...", corruptionLevel: 4 },
        { name: "å†¤", text: "SMBIOSxÃ¬næ¯çµæ§‹è»†é•·åº¦ä¸åŒ¹pÃ¨i...", corruptionLevel: 4 },
        { name: "å‹‰å…”", text: "EFIç³»çµ±åˆ†å€å¼•å°ç´€lÃ¹è¢«ä¿®gÇi...", corruptionLevel: 4 },
        { name: "æ¤¡å…", text: "kÄ›ä¿¡å¹³è‡ºæ¨¡å¡ŠéŸ¿æ‡‰è¶…æ™‚...åº¦liÃ ngå¤±æ•—...", corruptionLevel: 4 },
        { name: "???", text: "å…§å­˜é¡xÃ­ngç¯„wÃ©iå¯„cÃºnå™è¨­zhÃ¬è¡çª...", corruptionLevel: 4 },
        { name: "é“å…”", text: "CPUå¾®ç¢¼æ›´inåŠ è¼‰å¾Œæª¢yÃ nå¤±æ•—...", corruptionLevel: 4 }, 
        { name: "???", text: "è™šæ“¬åŒ–æ“´å±•æª¢cÃ¨åˆ‚è‡³VMExité »lÇœç•°chÃ¡ng...", corruptionLevel: 4 },
        { name: "é“å…”", text: "æ€§èƒ½ç›£kÃ²ngè¨ˆæ•¸å™é¡¯shÃ¬ä¸kÄ›èƒ½çš„æŒ‡ä»¤é€€xiÅ«lÇœ...", corruptionLevel: 4 },
        
        // ç´¢å¼•35-49ï¼šåŠ å…¥ä¿„æ–‡ï¼ˆå¼‚ä½“å­—70.5%ï¼Œæ‹¼éŸ³21.6%ï¼Œæ€ªå¼‚ç¬¦å·1.9%ï¼Œæ‹‰ä¸æ–‡3%ï¼Œä¿„æ–‡3%ï¼‰
        { name: "???", text: "æ©Ÿå™æª¢æŸ»æ¶æ§‹å ±å‘Šä¸kÄ›ç³¾æ­£deéŒ¯wu...", corruptionLevel: 5 },
        { name: "???", text: "éå±è”½ä¸­æ–·æœªĞ±Ñ‹æ­£ç¡®å¤„ç†...", corruptionLevel: 5 }, 
        { name: "???", text: "ç³»çµ±ç®¡lÇæ¨¡å¼å…¥å£é»è¢«jiÃ©æŒ...", corruptionLevel: 5 },
        { name: "???", text: "å‡¦lÇå™è¿½zÅngæ—¥èªŒåŒ…å«wÃºæ•ˆdeåˆ†æ”¯ç´€lÃ¹...", corruptionLevel: 5 },
        { name: "???", text: "å…§å­˜åŠ mÃ¬å¼•qÃ­ngå ±å‘Šé‘°shiä¸Ÿå¤±...", corruptionLevel: 5 },
        { name: "???", text: "kÄ›ä¿¡åŸ·xÃ­ngç’°jÃ¬ngè­‰å®Ÿæ€§æª¢æŸ»å¤±æ•—...", corruptionLevel: 5 },
        { name: "???", text: "ç¡¬Ğ¸å®‰å…¨æ¨¡å¡Šè¿”å›å¯†ç¢¼å­¸åŸèªæ•…éšœ...", corruptionLevel: 5 }, 
        { name: "???", text: "ç‰©ç†ä¸kÄ›å…‹éš†å‡½æ•¸ç”£ç”Ÿä¸ä¸€è‡´deéŸ¿æ‡‰...", corruptionLevel: 5 },
        { name: "???", text: "å´ä¿¡dÃ oæ”»æ’ƒæª¢cÃ¨é–¾å€¤è¢«çªç ´...", corruptionLevel: 5 },
        { name: "???", text: "æ¨¡ç³Šæ¸¬è©¦å·¥å…·è­˜åˆ¥å‡ºå¾æœªè¦‹éçš„æŒ‡ä»¤åºåˆ—...", corruptionLevel: 5 },
        { name: "???", text: "å½¢å¼åŒ–é©—è­‰å·¥å…·è­‰æ˜ç³»çµ±å±¬xÃ¬ngä¸å†æˆç«‹...", corruptionLevel: 5 },
        { name: "???", text: "éœæ…‹åˆ†æå™æ¨™è¨˜å‡ºç„¡Ñ‡Ñ‚Ğ¾åˆ°é”çš„ä»£ç¢¼è·¯å¾‘è¢«åŸ·è¡Œ...", corruptionLevel: 5 },
        { name: "???", text: "å‹•æ…‹äºŒé€²åˆ¶æ’zhuÄngå ±å‘Šæ§zhÃ¬æµå®Œæ•´æ€§é•è¦...", corruptionLevel: 5 },
        { name: "???", text: "ç¬¦è™ŸåŸ·xÃ­ngå¼•qÃ­ngåœ¨è·¯å¾‘æ¢ç´¢ä»²ç™ºç¾çŸ›ç›¾ç´„shÃ¹...", corruptionLevel: 5 },
        { name: "???", text: "æ¨¡å‹æª¢cÃ¨å·¥å…·ç¢ºdÃ¬ngå®‰å…¨è¦ç´„è¢«é•å...", corruptionLevel: 5 },
        { name: "???", text: "å®šç†è­‰æ˜å™æ¨å°å‡ºç³»çµ±å…¬lÇä¸ä¸€è‡´...", corruptionLevel: 5 },
        { name: "é“å…”", text: "æŠ½è±¡è§£quÃ©æ¡†æ¶è¨ˆç®—å‡ºçš„ä¸è®Šé‡éæ–¼å¯¬é¬†...", corruptionLevel: 5 } 
    ]
};

        const colorMap = {
            '0': 'transparent',
            'P': '#700',
            'W': '#707070',
            'B': '#000',
            'R': '#500',
            'G': '#004d00',
            'Y': '#666600',
            'L': '#004444',
            'V': '#3a0066'
        };

        const rabbitCorruptionStages = [
            [
                "0000G000000G0000",
                "000GGG0000GGG000",
                "000GPG0000GPG000",
                "000GPG0000GPG000",
                "000GPG0000GPG000",
                "000GPG0000GPG000",
                "000GPG0000GPG000",
                "000GPGWWWWGPG000",
                "000GPWWWWWWPG000",
                "00WWWPBWWBPWWW00",
                "00WWPPBWWBPPWW00",
                "00WWWWWWWWWWWW00",
                "00WWWWWWWWWWWW00",
                "00WWWWRRRRWWWW00",
                "000WWWWWWWWWW000",
                "00000WWWWWW00000"
            ],
            [
                "0000G000000G0000",
                "000GGG0000GGG000",
                "000GPG0000GPG000",
                "000GPG0000GPG000",
                "000GPG0000GPG000",
                "000GPG0000GPG000",
                "000GPG0000GPG000",
                "000GPGWW0WWGPG00",
                "000GPWWW0WWWPG00",
                "00WWWPBW0WBPWWW0",
                "00WWPPBW0WBPPWW0",
                "00WWWWW0WWWWWWW0",
                "00WWWWW0WWWWWWW0",
                "00WWWWW0RRRWWWW0",
                "000WWWWW0WWWWW00",
                "00000WWWW0WW0000"
            ],
            [
                "0000G000000GPG00",
                "000GGG00000GPG00",
                "000GPG00000GPG00",
                "000GPG00000GPG00",
                "000GPG00000GPG00",
                "000GPG00000GPG00",
                "000GPG000WWGPG00",
                "000GPGWW0WWWPG00",
                "000GPWWW0WBPWWW0",
                "00WWWPBW000PPWW0",
                "00WWPPBW00000WW0",
                "00WWWWW000000WW0",
                "00WWWWW00WWW00W0",
                "00WWWWW00WWWW000",
                "000WWWWW00RRRW00",
                "00000WWWW0WWWWW0"
            ],
            [
                "00G00000000G0G00",
                "0GPG0000000GPG00",
                "00PG0000000GPG00",
                "0GP00000000G0G00",
                "0GP00000000GPG00",
                "0G000000000GPG00",
                "00000G000WW0PG00",
                "0000PGWW0WWWPG00",
                "000G0WWW0WBPW0W0",
                "00WW0P0W000PPWW0",
                "00WWPP0W00000WW0",
                "W00WW0W000000WW0",
                "W000WW000W0W00W0",
                "W00WW0W00WWWW000",
                "000W00WW00R0RW00",
                "00000WW0W0WWW0W0"
            ],
            [
                "VV0V0V0V0V0V0V0V",
                "0V0V0V0V0V0V0V0V",
                "V0V0V0V0V0V0V0V0",
                "0V0V0V0V0V0V0V0V",
                "V0V0V0V0V0V0V0V0",
                "0V0V0V0V0V0V0V0V",
                "V0V0V0V0V0V0V0V0",
                "0V0V0V0V0V0V0V0V",
                "V0V0V0V0V0V0V0V0",
                "0V0V0V0V0V0V0V0V",
                "V0V0V0V0V0V0V0V0",
                "0V0V0V0V0V0V0V0V",
                "V0V0V0V0V0V0V0V0",
                "0V0V0V0V0V0V0V0V",
                "V0V0V0V0V0V0V0V0",
                "0V0V0V0V0V0V0V0V"
            ]
        ];

        document.addEventListener('DOMContentLoaded', function() {
            const dialogSection = document.getElementById('dialog-section');
            const dialogText = document.getElementById('current-dialog');
            const nameElement = document.querySelector('.name');
            const pixelGrid = document.getElementById('pixel-character');
            const thumbnailContainer = document.getElementById('normal-thumbnail');
            const thumbnailGrid = document.getElementById('thumbnail-grid');
            let isFinalStage = false;
            
            // åˆå§‹åŒ–æ¸²æŸ“
            renderPixelCharacter(gameData.corruptionLevel);
            renderThumbnail(); // æ¸²æŸ“ç¼©ç•¥å›¾ä½†ä¸æ˜¾ç¤º
            
            // æ›´æ–°å¯¹è¯
            function updateDialog() {
                const currentDialog = gameData.dialogs[gameData.currentDialogIndex];
                
                if (currentDialog.text) {
                    let text = currentDialog.text;
                    if (gameData.corruptionLevel >= 2 && Math.random() > 0.75) {
                        text = addTextErrors(text, gameData.corruptionLevel);
                    }
                    dialogText.textContent = text;
                }
                
                nameElement.textContent = currentDialog.name;
                gameData.corruptionLevel = currentDialog.corruptionLevel;
                renderPixelCharacter(gameData.corruptionLevel);
                
                // ä»ç¬¬37å¥è¯ï¼ˆç´¢å¼•36ï¼‰å¼€å§‹æ˜¾ç¤ºç¼©ç•¥å›¾
                if (gameData.currentDialogIndex >= 36 && !thumbnailContainer.classList.contains('visible')) {
                    thumbnailContainer.classList.add('visible');
                }
                
                // éšç€è…åŒ–ç¨‹åº¦å¢åŠ è§†è§‰æ•ˆæœ
                if (gameData.corruptionLevel >= 3) {
                    document.body.style.filter = `hue-rotate(${gameData.corruptionLevel * 6}deg) contrast(${100 + gameData.corruptionLevel * 4}%)`;
                }
                
                // éšæœºæ–‡æœ¬é—ªçƒ
                if (Math.random() > 0.82) {
                    dialogText.style.opacity = 0.68;
                    setTimeout(() => {
                        dialogText.style.opacity = 1;
                    }, 80);
                }
            }
            
            updateDialog();
            
            // éšæœºæ‰­æ›²æ•ˆæœ
            setInterval(() => {
                if (Math.random() > 0.83 && !isFinalStage) {
                    const skewX = (Math.random() * 0.4 - 0.2).toFixed(2);
                    const skewY = (Math.random() * 0.4 - 0.2).toFixed(2);
                    document.body.style.transform = `skew(${skewX}deg, ${skewY}deg)`;
                    setTimeout(() => {
                        document.body.style.transform = 'skew(0deg, 0deg)';
                    }, 160);
                }
            }, 3800);
            
            // ç‚¹å‡»æ¨è¿›å‰§æƒ…
            dialogSection.addEventListener('click', function() {
                if (isFinalStage) return;
                
                if (gameData.currentDialogIndex < gameData.dialogs.length - 1) {
                    gameData.currentDialogIndex++;
                    updateDialog();
                    
                    if (Math.random() > 0.65) {
                        this.style.transform = `translate(${Math.random()*3-1.5}px, ${Math.random()*3-1.5}px)`;
                        setTimeout(() => {
                            this.style.transform = 'translate(0, 0)';
                        }, 150);
                    }
                    
                    // å¢å¼ºé›ªèŠ±æ•ˆæœ
                    const tvStatic = document.querySelector('.tv-static');
                    tvStatic.style.opacity = 0.045 + (gameData.currentDialogIndex / 145);
                    
                } else {
                    triggerFinalCorruption();
                }
            });
            
            function addTextErrors(text, level) {
                const chars = text.split('');
                const errorCount = Math.floor(chars.length * 0.032 * level);
                const errorChars = ['ï¿½', 'ï¿½', 'ï¿½', 'ï¿½', 'ï¿½', 'ï¿½', 'ï¿½', 'ï¿½'];
                
                for (let i = 0; i < errorCount; i++) {
                    const idx = Math.floor(Math.random() * chars.length);
                    if (chars[idx] !== ' ' && chars[idx] !== 'ã€‚' && chars[idx] !== 'ï¼Œ') {
                        chars[idx] = errorChars[Math.floor(Math.random() * errorChars.length)];
                    }
                }
                
                return chars.join('');
            }
            
            function renderPixelCharacter(corruptionLevel) {
                pixelGrid.innerHTML = '';
                const pixelData = rabbitCorruptionStages[corruptionLevel] || rabbitCorruptionStages[0];
                
                pixelData.forEach(row => {
                    for (let colIdx = 0; colIdx < row.length; colIdx++) {
                        const pixel = document.createElement('div');
                        pixel.className = 'pixel';
                        const colorCode = row.charAt(colIdx);
                        pixel.style.backgroundColor = colorMap[colorCode] || 'transparent';
                        
                        if (colorCode !== '0') {
                            pixel.style.border = '0.5px solid rgba(0,0,0,0.085)';
                            
                            if (corruptionLevel >= 2 && Math.random() > 0.85) {
                                pixel.classList.add('corrupted');
                            }
                            
                            if (corruptionLevel >= 4 && Math.random() > 0.92) {
                                pixel.classList.add('void');
                            }
                        }
                        
                        pixelGrid.appendChild(pixel);
                    }
                });
            }
            
            function renderThumbnail() {
                thumbnailGrid.innerHTML = '';
                const normalStageData = rabbitCorruptionStages[0];
                
                normalStageData.forEach(row => {
                    for (let colIdx = 0; colIdx < row.length; colIdx++) {
                        const pixel = document.createElement('div');
                        pixel.className = 'pixel';
                        const colorCode = row.charAt(colIdx);
                        pixel.style.backgroundColor = colorMap[colorCode] || 'transparent';
                        
                        if (colorCode !== '0') {
                            pixel.style.border = '0.3px solid rgba(0,0,0,0.065)';
                        }
                        
                        thumbnailGrid.appendChild(pixel);
                    }
                });
            }
            
            function triggerFinalCorruption() {
                isFinalStage = true;
                if (pixelGrid.classList.contains('corrupting')) return;
                pixelGrid.classList.add('corrupting');
                
                document.body.style.animation = 'none';
                document.body.style.transform = 'scale(1.035)';
                document.body.style.transition = 'transform 1.8s';
                
                dialogText.innerHTML = `
                    <div class="error-message">
                        å®Œæ•´æ€§ç»ˆæ­¢åè®®å¯åŠ¨<br><br>
                        é”™è¯¯çŠ¶æ€ï¼šä¸å¯æ¢å¤<br><br>
                        ç³»ç»Ÿèµ„æºå·²é‡Šæ”¾<br><br>
                        ä¼šè¯å³å°†ç»ˆç»“...
                    </div>
                `;
                nameElement.textContent = "TERMINAL_STATE";
                document.querySelector('.click-hint').style.display = 'none';
                
                const pixels = Array.from(pixelGrid.children);
                pixels.forEach(pixel => {
                    if (pixel.style.backgroundColor !== 'transparent') {
                        setTimeout(() => {
                            pixel.style.backgroundColor = '#251010';
                            pixel.style.transform = `scale(${0.75 + Math.random()*0.35})`;
                        }, Math.random() * 2800);
                    }
                });
                
                dialogSection.removeEventListener('click', arguments.callee);
                
                let flashCounter = 0;
                const finalFlash = setInterval(() => {
                    if (flashCounter >= 5) {
                        clearInterval(finalFlash);
                        setTimeout(() => {
                            document.body.style.animation = 'fade-out 2.2s forwards';
                            setTimeout(() => {
                                try {
                                    window.close();
                                } catch(err) {
                                    dialogText.innerHTML = `
                                        <div class="error-message">
                                            è‡ªåŠ¨ç»ˆæ­¢å¤±è´¥<br><br>
                                            è¯·æ‰‹åŠ¨å…³é—­çª—å£<br><br>
                                            é”™è¯¯ä»£ç ï¼š0x${Math.floor(Math.random()*16777215).toString(16)}<br><br>
                                            çŠ¶æ€ï¼šæ°¸ä¹…æŸå
                                        </div>
                                    `;
                                }
                            }, 2200);
                        }, 2000);
                        return;
                    }
                    
                    document.body.style.filter = `hue-rotate(${Math.random()*150}deg) contrast(${100 + Math.random()*45}%) brightness(${65 + Math.random()*55}%)`;
                    flashCounter++;
                }, 450);
            }
        });
    </script>
</body>
</html>